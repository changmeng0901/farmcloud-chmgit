<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:s="http://jboss.com/products/seam/taglib"
   xmlns:rich="http://richfaces.org/rich"
   xmlns:a="http://richfaces.org/a4j"
   contentType="text/html">
   
<html  xmlns="http://www.w3.org/1999/xhtml" lang="en" ng-app="app">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <meta http-equiv="pragma" content="no-cache"/>
      <title>义田帮手简单实用的农场管理工具</title>
      <link rel="shortcut icon" href="#{request.contextPath}/favicon.ico"/>

     <link rel="stylesheet" type="text/css" media="screen" href="#{request.contextPath}/asset/css/bootstrap-select.min.css"/>
	 <link href="#{request.contextPath}/asset/css/bootstrap3.min.css" rel="stylesheet"/>
	  <link rel="stylesheet" type="text/css" href="#{request.contextPath}/asset/css/register/Register.css"/>
	 <link type="text/css" rel="stylesheet" href="#{request.contextPath}/asset/css/skinBlue.css" />
	 
	<script type="text/javascript" src="#{request.contextPath}/asset/js/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/new/bootstrap.min.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/asset/new/bootstrap-select.min.js"></script>
	 <script type="text/javascript" src="#{request.contextPath}/asset/js/checkBox/icheck.js"></script>

	 <style>
</style>
   </head>
   <body>
	<!-- 头部 -->
    <div class="register_header_wap">
        <div class="register_header clear">
            <img class="h-logo fl" src="#{request.contextPath}/asset/images/register/register_logo.png" />
            <span class="h-line"></span>
            <p class="h-phone">欢迎注册</p>
        </div>
    </div>
#{userHome.initArea()}
<h:form name="registrationName" id="registrationName">
	    <!-- 主体内容 -->
    <div class="register_content_wap clear">
        <!-- 1.注册主体 -->
        <div class="register_content" style="display:none-;">
            <div class="register_lt">
                <p class="p_txt1">
                   <img width="360" height="72" src="#{request.contextPath}/asset/images/register/register_img1.jpg" />
                </p> 
                <div class="p_txt2">
                    <span class="animate_bg">
                        <img class="ani_bg1" src="#{request.contextPath}/asset/images/register/register_img3.png" />
                        <img class="ani_bg2" src="#{request.contextPath}/asset/images/register/register_img4.png" />
                    </span>
                    <img class="ani_bg3" width="540" height="390" src="#{request.contextPath}/asset/images/register/register_img5.png" />
                </div>
            </div>
            <div class="register_rt">
                <ol class="register_list" style="padding-top:24px;">
                    <li class="li_item">
                        <p class="p_txt">手机号</p>
                        <div class="input_block dq_cur">
                            <i class="i_icon icon_po1"></i>
                            <input class="form-control" type="text" value="请输入手机号" id="phone" name="uName"/>
                            <i class="i_danger"></i>
                            <p class="i_tip">您输入的手机号格式不正确</p>
                        </div>
                    </li>
                    <li class="li_item">
                        <p class="p_txt">图片验证码</p>
                        <div class="input_block" style="width:217px;">
                            <i class="i_icon icon_po2"></i>
                            <input class="form-control nw170" style="width:110px;"  type="text" value="请输入验证码" id="yzCode"/>
                             <i class="i_danger" style="right:70px;"></i>
                            <p class="i_tip" style="right:60px;">您输入图形验证码有误，请重新填写</p>
                        </div>
                        
                        <div style="line-height:22px;margin-top:-34px;">
                            <img id="validCode" style="margin-left: 5px;" src="#{request.contextPath}/ImageCode" width="64" height="32"/>
                        </div>
                        <div style="float: right;margin-top:-26px;margin-right:20px;font-size:12px;"> 
                        	<font color="#66666">看不清？</font>
                        	<a href="#" onclick="document.getElementById('validCode').src = '#{request.contextPath}/ImageCode?p=' + new Date();return false;">
                        		<font color="#1faeff">换一张</font> 
                        	</a>                      
                        </div>
                    </li>
                    <li class="li_item">
                        <p class="p_txt">短信验证码</p>
                        <div class="input_block">
                            <i class="i_icon icon_po2"></i>
                            <input class="form-control nw170" type="text" value="请输入验证码" id="smsCode" name="verifyCode"/>
                            <button class="get_yzm" type="button" id="smsCodeBtn" onclick="getSmsCode()">获取验证码</button>
                            <p class="get_yzm" id="smsCodeWait" style="cursor:default;display:none;">60秒后重试！</p>
                            <i class="i_danger" style="right:94px;"></i>
                            <p class="i_tip" style="right:86px;">验证码输入错误，请重新输入</p>
                        </div>
                    </li>
                    <li class="li_item">
                        <p class="p_txt">设置密码</p>
                        <div class="input_block">
                            <i class="i_icon icon_po3"></i>
                            <input id="desc_txt1" class="form-control" type="text" value="请输入密码(数字＋字母)"/>
                            <input id="password1" name="lodpassword" class="form-control" type="password" value="" style="display:none;" />
                            <i class="i_danger"></i>
                            <p class="i_tip">密码长度请大于6位！</p>
                        </div>
                    </li>
                    <li class="li_item">
                        <p class="p_txt">确认密码</p>
                        <div class="input_block">
                            <i class="i_icon icon_po3"></i>
                            <input id="desc_txt2" class="form-control" type="text" value="请确认密码"/>
                            <input id="password2" name="newpassword" class="form-control" type="password" value="" style="display:none;" />
                            <i class="i_danger"></i>
                            <p class="i_tip">两次输入密码不一致！</p>
                        </div>
                    </li>
                    <li class="li_item">
                        <p class="p_txt">农场名称</p>
                        <div class="input_block">
                            <i class="i_icon icon_po4"></i>
                            <input class="form-control" type="text" value="请输入农场名称" id="enterpriseName" name="eName"/>
                            <i class="i_danger"></i>
                            <p class="i_tip">农场名称已存在</p>
                        </div>
                    </li>
                    <li class="li_item clear">
                    <p class="s_tip">请选择农场所在地</p>
                        <p class="p_txt">农场所在地</p>
                        <div class="se_selt93 fl mr10">
                        	<select class="selectpicker" id="province" name="province" onchange="getCity();">
                                <a:repeat  value="#{userHome.provinceList}" var="var" >	
                                    <option value="#{var[1]}" >#{var[0]}</option>	                              																						
								</a:repeat>
                            </select>									
                        </div>
                        <div class="se_selt93 fl mr10">
                            <h:panelGroup id="cityPanel">
								<select class="selectpicker" id="city" name="city" onchange="getArea();">
	                                <a:repeat  value="#{userHome.cityList}" var="var" >	
	                                    <option value="#{var[1]}" >#{var[0]}</option>	                              																						
									</a:repeat>
	                            </select>
								<script type="text/javascript">
									jQuery('#province').selectpicker({noneSelectedText:"请选择省"});
									jQuery('#city').selectpicker({noneSelectedText:"请选择市"});
									jQuery('#area').selectpicker({noneSelectedText:"请选择县"});

	
								</script>
							</h:panelGroup>
                        </div>
                        <div class="se_selt93 fl">
                            <h:panelGroup id="areaPanel">
								<select class="selectpicker" id="area" name="area">
	                                <a:repeat  value="#{userHome.areaList}" var="var" >	
	                                    <option value="#{var[1]}" >#{var[0]}</option>	                              																						
									</a:repeat>
	                            </select>
								<script type="text/javascript">
								jQuery('#province').selectpicker({noneSelectedText:"请选择省"});
								jQuery('#city').selectpicker({noneSelectedText:"请选择市"});
								jQuery('#area').selectpicker({noneSelectedText:"请选择县"});

								</script>
							</h:panelGroup>
                        </div>
                    </li>
                </ol>
                <div class="read_protocol clear">
                    <input class="iCheck" type="checkbox" id="agreeStu" name="agreeStu" checked="checked" />
                    <label class="txt">我已阅读并同意<span><a href= "http://farmeasy.cn/tiaokuan.html" target="_blank">《义田帮手注册协议》</a></span></label>
                </div>
                <h:inputHidden value="#{enterpriseInfoHome.instance.province}" id="hidProvince" />
                <h:inputHidden value="#{enterpriseInfoHome.instance.city}" id="hidCity"/>
                <h:inputHidden value="#{enterpriseInfoHome.instance.county}" id="hidArea"/>
                <h:inputHidden value="#{userHome.yzCode}"  id="zcyzCode"/>
                <h:commandButton id="registerBtn" styleClass="btn btn-success register_btn" value="立即注册" action="#{userHome.registeUser()}" onclick="if(!checkSubmit()) return false;"/>
                <a class="return_login" href="login.seam">返回登录</a>
            </div>
        </div>
    </div>
    <!--主体结束-->
    <!-- 脚部 -->
    <div class="register_footer_wap clear">
        <div class="register_footer">技术支持：北京奥科美技术服务有限公司&#160;&#160;&#160;&#160;备案/许可证号：京ICP09058216号-6</div>
    </div>
</h:form>
 <a:form>
 		<a:queue requestDelay="10" ignoreDupResponses="true"/>
        <a:jsFunction name="checkUnameMe"  action="#{userHome.checkUname()}" data="#{userHome.chongfu}" oncomplete="checkUnameComplete(data)" >
        	<a:actionparam name="uName" assignTo="#{userHome.uName}"/>
        </a:jsFunction>        
	    <a:jsFunction name="getCityArea" reRender="cityPanel,areaPanel" action="#{userHome.getCityArea()}">
	  		<a:actionparam name="provEn" assignTo="#{userHome.provEn}"/>
	    </a:jsFunction>
	    <a:jsFunction name="getNameArea" reRender="areaPanel" action="#{userHome.getNameArea()}">
	  		<a:actionparam name="districtEn" assignTo="#{userHome.districtEn}"/>
	    </a:jsFunction>
	    <a:jsFunction name="sCode" action="#{userHome.sendCode()}" data="#{userHome.message}" oncomplete="sendCodeBack(data);">
      		<a:actionparam name="phone" assignTo="#{userHome.phone}"/>
      		<a:actionparam name="requestType" assignTo="#{userHome.requestType}"/>
      		<a:actionparam name="yzCode" assignTo="#{userHome.yzCode}" />
        </a:jsFunction>
        <a:jsFunction name="checkTelCode" action="#{userHome.checkTelCode()}" data="#{userHome.telCodeMsg}" oncomplete="checkTelCodeBack(data);">
      		<a:actionparam name="phone" assignTo="#{userHome.phone}"/>
      		<a:actionparam name="verify" assignTo="#{userHome.verify}"/>
      		<a:actionparam name="requestType" assignTo="#{userHome.requestType}"/>
        </a:jsFunction>
        <a:jsFunction name="checkEnterName" action="#{userHome.checkEnterName()}" data="#{userHome.chongfu}" oncomplete="checkEnterNameComplete(data)">
      		<a:actionparam name="eName" assignTo="#{userHome.eName}"/>
        </a:jsFunction>
 </a:form>
	    
   </body>
    <script type="text/javascript">
 //<![CDATA[
 jQuery = jQuery.noConflict();
jQuery(function(){	
	var type = window.location.href.split('=')[1];
	if(type=='medlar'){
		jQuery(".return_login").attr("href","medlarLogin.seam");
	}else if(type=='yiy'){
		jQuery(".return_login").attr("href","yyindex.seam");
	}else{
		jQuery(".return_login").attr("href","login.seam");
	}
    // 文本框获取焦点和失去焦点状态变化
    jQuery('input[type=text]').focus(function(){
        var txt_val = this.defaultValue;
        if( jQuery(this).val() == txt_val ){
            jQuery(this).val('');
        }
        jQuery(this).css('color','#333');
      
       	//选中时为高亮
       	jQuery(".input_block").removeClass("dq_cur");
        jQuery(this).parent().addClass("dq_cur");    
		//选中时提示框隐藏
		jQuery(this).siblings(".i_danger").css("display","none");
		jQuery(this).siblings(".i_tip").css("display","none");
    });
    jQuery('input[type=text]').blur(function(){
        var txt_val = this.defaultValue;
        if( jQuery(this).val() == '' ){
            jQuery(this).val( this.defaultValue );
            jQuery(this).css('color','#ccc')
        }else{
            jQuery(this).css('color','#333');
        }

        jQuery(this).parent().removeClass("dq_cur");   
        var inputType=jQuery(this).attr("id"); 
        //手机号失去焦点
        if(inputType=="phone"){
        	jQuery(".i_danger").css("display","none");
    		jQuery(".i_tip").css("display","none");
        	checkPhone(jQuery(this).val());
        }else if(inputType=="smsCode"){//验证码失去焦点
        	jQuery(".i_danger").css("display","none");
    		jQuery(".i_tip").css("display","none");
        	checkCode(jQuery(this).val());
        }else if(inputType=="enterpriseName"){//企业名称失去焦点
        	jQuery(".i_danger").css("display","none");
    		jQuery(".i_tip").css("display","none");
        	checkEnterpriseName(jQuery(this).val());
        }
    });

    //下拉菜单
    jQuery('#province').selectpicker({noneSelectedText:"请选择省"});
    jQuery('#city').selectpicker({noneSelectedText:"请选择市"});
    jQuery('#area').selectpicker({noneSelectedText:"请选择县"});
    jQuery("#province").selectpicker("val","");//默认类型为请选择
    jQuery("#city").selectpicker("val","");
    jQuery("#area").selectpicker("val","");
    //复选框
    
    jQuery('input[type="checkbox"]').iCheck({
        checkboxClass: 'icheckbox_minimal-blue'
    });
    jQuery("#agreeStu").iCheck("check"); 
    jQuery("#agreeStu").on("ifClicked", function(event){
    	if (this.checked) {
    		agreeStu = "1";
    		document.getElementById("registrationName:registerBtn").disabled = true;
    	}else{
    		agreeStu = "0";
    		document.getElementById("registrationName:registerBtn").disabled = false;
    	}
    });
    // 设置密码和确认密码状态
    getPassword('#desc_txt1','#password1');
    getPassword('#desc_txt2','#password2');

    // 计算password-content  垂直居中
	getHeight();

    jQuery(window).resize(function(){
        getHeight() 
    });
});

    // -------设置密码和确认密码状态
    function getPassword(obj,passw){
        jQuery(obj).focus(function(){
            jQuery(this).hide();
            jQuery(passw).show();
            jQuery(passw).focus();   
          	
        })
        jQuery(passw).focus(function(){
        	//选中时为高亮
          	jQuery(".input_block").removeClass("dq_cur");
	        jQuery(this).parent().addClass("dq_cur");    
	   		//选中时提示框隐藏
	   		jQuery(this).siblings(".i_danger").css("display","none");
			jQuery(this).siblings(".i_tip").css("display","none");
        })
        jQuery(passw).blur(function(){
            if( jQuery(passw).val() == '' ){
                jQuery(obj).show();
                jQuery(passw).hide();    
            }
            
            var inputType=jQuery(this).attr("id");    
            if(inputType=="password1"){
            	jQuery(".i_danger").css("display","none");
        		jQuery(".i_tip").css("display","none");
            	checkPsw();
            }else if(inputType=="password2"){
            	jQuery(".i_danger").css("display","none");
        		jQuery(".i_tip").css("display","none");
            	checkConfirmPsw();
            }
        })
    }
    // -------计算password-content  垂直居中
    function getHeight(){
        var oWindowH = jQuery(window).height() ;
        var oHeaderH = jQuery('.register_header_wap').outerHeight();
        var oFooterH = jQuery('.register_footer_wap').outerHeight() ;
        jQuery('.register_content_wap').css({
            'height' : oWindowH - oHeaderH-oFooterH
        });
    }
    //1:验证不通过 0:通过
    var agreeStu = "0";//默认同意
    var unameStr = "1";
    var codeStr = "1";
    var pwd1Str = "1";
    var pwd2Str = "1";
    var enameStr = "1";
    var locationStr = "1";
    var re= /^(13[0-9]|15[012356789]|17[01236789]|18[0-9]|14[57])[0-9]{8}$/;
	function checkPhone(phone){
		if(""==phone || "请输入手机号"==phone){
			jQuery(".i_tip").eq(0).html("请输入手机号");
			jQuery(".i_danger").eq(0).css("display","block");
			jQuery(".i_tip").eq(0).css("display","block");
			unameStr = "1";
		}else if(!re.test(phone) || phone.length != 11){
			jQuery(".i_tip").eq(0).html("您输入的手机号格式不正确");
			jQuery(".i_danger").eq(0).css("display","block");
			jQuery(".i_tip").eq(0).css("display","block");
			unameStr = "1";
		}else{
			checkUnameMe(phone);
		}		
	}

	function checkUnameComplete(obj){
		var str = obj;
		if(str == "1"){
			unameStr = "1";
			jQuery(".i_tip").eq(0).html("您的手机号已经注册");
			jQuery(".i_tip").eq(0).css("display","block");
			jQuery(".i_danger").eq(0).css("display","block");			
		}else{
			unameStr = "0";
			jQuery(".i_tip").eq(0).css("display","none");
			jQuery(".i_danger").eq(0).css("display","none");
		}
	}
	function checkCode(smsCode){
		var tel=jQuery("#phone").val();
		if(""==smsCode || "请输入验证码"==smsCode){
			codeStr = "1";
			jQuery(".i_tip").eq(2).html("请输入验证码！");
			jQuery(".i_tip").eq(2).css("display","block");
			jQuery(".i_danger").eq(2).css("display","block");
			return false;
		}else{
			checkTelCode(tel,smsCode,"2");
		}
	}
	function checkTelCodeBack(msg){
		if(""==msg){
			codeStr = "0";
			jQuery(".i_tip").eq(2).css("display","none");
			jQuery(".i_danger").eq(2).css("display","none");
		}else if("tel"==msg){
			unameStr = "1";
			codeStr = "1";
			jQuery(".i_tip").eq(0).html("您的手机号输入错误");
			jQuery(".i_tip").eq(0).css("display","block");
			jQuery(".i_danger").eq(0).css("display","block");
		}else if("code"==msg){
			codeStr = "1";
			jQuery(".i_tip").eq(2).html("验证码输入错误，请重新输入！");
			jQuery(".i_tip").eq(2).css("display","block");
			jQuery(".i_danger").eq(2).css("display","block");
		}else if("past"==msg){
			codeStr = "1";
			jQuery(".i_tip").eq(2).html("验证码已失效，请重新获取！");
			jQuery(".i_tip").eq(2).css("display","block");
			jQuery(".i_danger").eq(2).css("display","block");
		}
	}
	/**
	 * 获取验证码
	 */
	function getSmsCode(){		
		var phone=jQuery("#phone").val();
		var yzCode=jQuery("#yzCode").val();
		if(""==phone || "请输入手机号"==phone){
			jQuery(".i_tip").eq(0).html("请输入手机号");
			jQuery(".i_danger").eq(0).css("display","block");
			jQuery(".i_tip").eq(0).css("display","block");
			unameStr = "1";
		}else if(!re.test(phone) || phone.length != 11){
			jQuery(".i_tip").eq(0).html("您输入的手机号格式不正确");
			jQuery(".i_danger").eq(0).css("display","block");
			jQuery(".i_tip").eq(0).css("display","block");
			unameStr = "1";
		}else if(""==yzCode || "请输入验证码"==yzCode){
			jQuery(".i_tip").eq(1).html("请输入图形验证码");
			jQuery(".i_danger").eq(1).css("display","block");
			jQuery(".i_tip").eq(1).css("display","block");
			unameStr = "1";

		}else{
// 			document.getElementById("smsCodeBtn").disabled = true;
			sCode(phone,2,yzCode);
		}
 		/* if(unameStr == "0"){
			sendCode(phone,2);
		}else{
			document.getElementById("smsCodeBtn").disabled = false;
		} */ 
	}
	function sendCodeBack(msg){		
		if(""==msg){
			time1=59;
			timer1= setInterval( userHandler , 1000);
			jQuery("#smsCodeBtn").css("display","none");
			jQuery("#smsCodeWait").css("display","");

			//jQuery(".i_tip").eq(1).css("display","none");
			//jQuery(".i_danger").eq(1).css("display","none");
			document.getElementById("smsCodeBtn").disabled = false;
			return false;
		}else if("tel"==msg){
			unameStr = "1";
			jQuery(".i_tip").eq(0).html("您的手机号已经注册");
			jQuery(".i_tip").eq(0).css("display","block");
			jQuery(".i_danger").eq(0).css("display","block");	
			document.getElementById("smsCodeBtn").disabled = false;
			return false;
		}else if("yzCode"==msg){
			jQuery(".i_tip").eq(1).html("图片验证码错误!");
			jQuery(".i_tip").eq(1).css("display","block");
			jQuery(".i_danger").eq(1).css("display","block");
			return false;
		}else{
			jQuery("#smsCodeBtn").css("display","");
			jQuery("#smsCodeWait").css("display","none");
			jQuery("#smsCodeWait").html("60秒后重试！");

			jQuery(".i_tip").eq(2).html(msg);
			jQuery(".i_tip").eq(2).css("display","block");
			jQuery(".i_danger").eq(2).css("display","block");
			document.getElementById("smsCodeBtn").disabled = false;
			return true;
		}
		
	}
	var time1=0;
	var timer1; 
	var userHandler=function(){
		jQuery("#smsCodeWait").html(time1+"秒后重试！");
		time1=time1-1;
		if(time1==0){
			clearInterval(timer1);
			jQuery("#smsCodeBtn").css("display","");
			jQuery("#smsCodeWait").css("display","none");
			jQuery("#smsCodeWait").html("60秒后重试！");
		}
	};
	var passChe1 = /^[a-zA-Z0-9]+$/;
	var passChe2 = /(^(.*\d+.*[a-zA-Z]+.*)$)|(^(.*[a-zA-Z]+.*\d+.*)$)/;
	function checkPsw(){
		var psw=document.getElementById("password1").value;
		if(""==psw){
			pwd1Str = "1";
			jQuery(".i_tip").eq(3).html("请输入密码！");
			jQuery(".i_tip").eq(3).css("display","block");
			jQuery(".i_danger").eq(3).css("display","block");
			return false;
		}else if(psw.length<7){
			pwd1Str = "1";
			jQuery(".i_tip").eq(3).html("密码长度请大于6位！");
			jQuery(".i_tip").eq(3).css("display","block");
			jQuery(".i_danger").eq(3).css("display","block");
			return false;
		}else if(psw.length>15){
			pwd1Str = "1";
			jQuery(".i_tip").eq(3).html("密码长度不可超过15位！");
			jQuery(".i_tip").eq(3).css("display","block");
			jQuery(".i_danger").eq(3).css("display","block");
			return false;
		}else if(!passChe1.test(psw) || !passChe2.test(psw)){
			pwd1Str = "1";
			jQuery(".i_tip").eq(3).html("请输入字母与数字组合的密码！");
			jQuery(".i_tip").eq(3).css("display","block");
			jQuery(".i_danger").eq(3).css("display","block");
			return false;
		}else{
			pwd1Str = "0";
			jQuery(".i_tip").eq(3).css("display","none");
			jQuery(".i_danger").eq(3).css("display","none");
		}
	}
	function checkConfirmPsw(){
		var psw1=document.getElementById("password1").value;
		var psw2=document.getElementById("password2").value;
		if(""==psw2){
			pwd2Str = "1";
			jQuery(".i_tip").eq(4).html("请输入确认密码！");
			jQuery(".i_tip").eq(4).css("display","block");
			jQuery(".i_danger").eq(4).css("display","block");
			return false;
		}else if(psw1!=psw2){
			pwd2Str = "1";
			jQuery(".i_tip").eq(4).html("两次输入密码不一致！");
			jQuery(".i_tip").eq(4).css("display","block");
			jQuery(".i_danger").eq(4).css("display","block");
			return false;
		}else{
			pwd2Str = "0";
			jQuery(".i_tip").eq(4).css("display","none");
			jQuery(".i_danger").eq(4).css("display","none");
		}
	}
	function checkEnterpriseName(enterName){
		if(""==enterName || "请输入农场名称"==enterName){
			enameStr="1";
			jQuery(".i_tip").eq(5).html("请输入农场名称！");
			jQuery(".i_tip").eq(5).css("display","block");
			jQuery(".i_danger").eq(5).css("display","block");
			return false;
		}else if(enterName.length>30){
			enameStr="1";
			jQuery(".i_tip").eq(5).html("农场名称不可超过30字！");
			jQuery(".i_tip").eq(5).css("display","block");
			jQuery(".i_danger").eq(5).css("display","block");
			return false;
		}else{
			checkEnterName(enterName);
		}
	}
	function checkEnterNameComplete(str){
		if(str == "1"){
			enameStr="1";
			jQuery(".i_tip").eq(5).html("农场名称已存在!");
			jQuery(".i_tip").eq(5).css("display","block");
			jQuery(".i_danger").eq(5).css("display","block");		
		}else{
			enameStr="0";
			jQuery(".i_tip").eq(5).css("display","none");
			jQuery(".i_danger").eq(5).css("display","none");
		}
	}
	function getCity(){
		var pro=document.getElementById("province").value;
		getCityArea(pro);
	}
	function getArea(){
		var city=document.getElementById("city").value;
		getNameArea(city);
	}
    //用户注册提交时再次验证
	function checkSubmit(){
		checkPhone(jQuery("#phone").val());
		var yzCode=jQuery("#yzCode").val();
		if(""==yzCode || "请输入验证码"==yzCode){
			jQuery(".i_tip").eq(1).html("请输入图形验证码");
			jQuery(".i_danger").eq(1).css("display","block");
			jQuery(".i_tip").eq(1).css("display","block");
			return false;
		}else{
			jQuery("#registrationName\\:zcyzCode").val(yzCode);
		}
		if(unameStr == "1"){
			return false;
		}
		if(unameStr == "0" ){
			checkCode(jQuery("#smsCode").val());
			if(codeStr == "1"){
				return false;
			}
		}
		if(codeStr == "0"){
			checkPsw();
			if(pwd1Str == "1"){
				return false;
			}
		}
		if(pwd1Str == "0"){
			checkConfirmPsw();
			if(pwd2Str == "1"){
				return false;
			}
		}
		if(pwd2Str == "0"){
			checkEnterpriseName(jQuery("#enterpriseName").val());
			if(enameStr == "1"){
				return false;
			}
		}
		if(enameStr == "0"){
			var province=document.getElementById("province").value;
			 var city=document.getElementById("city").value;
			 var area=document.getElementById("area").value;		 
			 if(""==province || ""==city || ""==area){
				jQuery(".s_tip").css("display","block");
				locationStr="1";
				return false;
		     }else{    	 
		    	 jQuery("#registrationName\\:hidProvince").val(province);
		    	 jQuery("#registrationName\\:hidCity").val(city);
		    	 jQuery("#registrationName\\:hidArea").val(area);
		    	 locationStr="0";
		    	 jQuery(".s_tip").css("display","none");	    	 
			 }
			 if(locationStr == "1"){
				return false;
			}
		}
		 if(agreeStu=="1"){
			alert("请同意《义田帮手注册协议》!");
			return false;
		 }
		 if(unameStr == "0" && codeStr == "0" && pwd1Str == "0" && pwd2Str == "0" && enameStr == "0" && locationStr == "0" && agreeStu=="0"){
			return true;
		 }else{
			return false;
		 }
	}

	//]]>
    </script>
<div class="modal-backdrop fade in" id="showDiv" style="display:none;"></div>
</html>
</f:view>
